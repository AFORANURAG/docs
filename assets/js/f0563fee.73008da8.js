"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[550],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5186:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:4},o="Transactions",s={unversionedId:"concepts/transactions",id:"concepts/transactions",title:"Transactions",description:"We think of a transaction as an encapsulation of events that compose a single unit of service for a web application.",source:"@site/docs/concepts/transactions.md",sourceDirName:"concepts",slug:"/concepts/transactions",permalink:"/concepts/transactions",draft:!1,editUrl:"https://github.com/cyclic-software/docs/blob/main/docs/concepts/transactions.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Storage",permalink:"/concepts/storage"},next:{title:"Overview",permalink:"/serverless/overview"}},l={},c=[{value:"Transaction components",id:"transaction-components",level:2},{value:"Using transactions for analysis and debugging",id:"using-transactions-for-analysis-and-debugging",level:2},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"Timeline",id:"timeline",level:3},{value:"Limitations",id:"limitations",level:2}],p={toc:c};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"transactions"},"Transactions"),(0,r.kt)("p",null,"We think of a ",(0,r.kt)("em",{parentName:"p"},"transaction")," as an encapsulation of events that compose a single unit of service for a web application. "),(0,r.kt)("p",null,"These events consist of an entire end-to-end lifecycle of a single request handled by an app. The Cyclic runtime instruments applications with tooling that captures, measures and aggregates network requests, responses, application logs, errors and exceptions to provide full visibility for each call. "),(0,r.kt)("h2",{id:"transaction-components"},"Transaction components"),(0,r.kt)("p",null,"Each transaction is composed of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The request sent by the caller:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"url"),(0,r.kt)("li",{parentName:"ul"},"method"),(0,r.kt)("li",{parentName:"ul"},"query string"),(0,r.kt)("li",{parentName:"ul"},"headers"),(0,r.kt)("li",{parentName:"ul"},"payload"),(0,r.kt)("li",{parentName:"ul"},"source ip"),(0,r.kt)("li",{parentName:"ul"},"user agent"))),(0,r.kt)("li",{parentName:"ul"},"App initialization output"),(0,r.kt)("li",{parentName:"ul"},"App logging output to console or from any loggers:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"log payload"),(0,r.kt)("li",{parentName:"ul"},"type of io ",(0,r.kt)("inlineCode",{parentName:"li"},"stdout"),",",(0,r.kt)("inlineCode",{parentName:"li"},"stderr")))),(0,r.kt)("li",{parentName:"ul"},"Exceptions and runtime errors"),(0,r.kt)("li",{parentName:"ul"},"The response from your application:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"http status code"),(0,r.kt)("li",{parentName:"ul"},"headers"),(0,r.kt)("li",{parentName:"ul"},"payload body")))),(0,r.kt)("h2",{id:"using-transactions-for-analysis-and-debugging"},"Using transactions for analysis and debugging"),(0,r.kt)("p",null,"In addition to the Cyclic realtime log stream, transactions are a great way to understand what is happening in your application.\nTransactions are available as a tab on an application view; each request to an app is presented as a request-response pair."),(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("p",null,"Given a sample request made via ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ curl 'https://my-app.cyclic.app/?hello=world'  \nok\n")),(0,r.kt)("p",null,"The request payload can be viewed as:\n",(0,r.kt)("img",{alt:"Transaction Request",src:n(6660).Z,title:"Transaction Request",width:"2006",height:"1068"})),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("p",null,"Similarly, the details of the response are viewable as:\n",(0,r.kt)("img",{alt:"Transaction Response",src:n(9558).Z,title:"Transaction Response",width:"2004",height:"756"})),(0,r.kt)("h3",{id:"timeline"},"Timeline"),(0,r.kt)("p",null,"On the back end, we had a single api handler at the root ",(0,r.kt)("inlineCode",{parentName:"p"},"/")," route implemented as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"  app.get('/',async (req, res) => {\n    console.log(req.headers['user-agent'])\n    console.log(Date.now())\n    console.log(req.query)\n    console.error('this is an error')\n    return res.send('ok')\n  })\n")),(0,r.kt)("p",null,"Cyclic presents the timeline of the logs, errors and exceptions in context of the request and response in an easy to read, syntax highlighted timeline as:\n",(0,r.kt)("img",{alt:"Transaction Timeline",src:n(9664).Z,title:"Transaction Timeline",width:"2018",height:"560"})),(0,r.kt)("h2",{id:"limitations"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cyclic currently allows viewing transactions from the last 15 minutes"),(0,r.kt)("li",{parentName:"ul"},"Keyword and date filters are not yet available")))}u.isMDXComponent=!0},9664:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/history-994bf7f57086200984a363bef193bc13.png"},6660:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/request-20309e4430a1697286dfec706cd63986.png"},9558:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/response-07035c450d02a6814b995992db0db137.png"}}]);