"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[424],{5118:function(e,t,i){i.r(t),i.d(t,{frontMatter:function(){return r},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var n=i(7462),a=i(3366),l=(i(7294),i(3905)),o=["components"],r={sidebar_position:2,id:"Build"},s=void 0,p={unversionedId:"overview/Build",id:"overview/Build",isDocsHomePage:!1,title:"Build",description:"Cyclic apps are built and deployed into AWS from code that originates in Github.",source:"@site/docs/overview/build.md",sourceDirName:"overview",slug:"/overview/Build",permalink:"/docs/overview/Build",editUrl:"https://github.com/cyclic-software/docs/edit/main/website/docs/overview/build.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,id:"Build"},sidebar:"tutorialSidebar",previous:{title:"Architecture",permalink:"/docs/overview/architecture"},next:{title:"Main entry point does not exist",permalink:"/docs/troubleshooting/main-entry-point-does-not-exist"}},c=[{value:"Code",id:"code",children:[]},{value:"Lifecycle scripts",id:"lifecycle-scripts",children:[]}],d={toc:c};function u(e){var t=e.components,r=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("head",null,(0,l.kt)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"})),(0,l.kt)("p",null,"Cyclic apps are built and deployed into AWS from code that originates in Github."),(0,l.kt)("p",null,"To trigger a build and deployment, install the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/apps/cyclic-preview"},"Cyclic Github app")," on any public repo. On first installation we will assign you repo to an app and give it a public url such as ",(0,l.kt)("inlineCode",{parentName:"p"},"your-app.cyclic.app"),". We will then build and deploy your app as described below. On future commits to the default branch (for example: merges of PRs or pushes) Github will send a webhook api call to us. We will then perform the same build and deploy steps."),(0,l.kt)("p",null,"The input of the ",(0,l.kt)("strong",{parentName:"p"},"build")," step is a single commit in a git repo and the output is a zip archive that can be deployed and run inside of an AWS lambda with the Cyclic lambda runtime."),(0,l.kt)("div",{style:{textAlign:"center"}},(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Cyclic Github app installation API call pattern",src:i(8061).Z,title:"Cyclic Github app installation"}))),(0,l.kt)("h2",{id:"code"},"Code"),(0,l.kt)("p",null,"The following is a close approximation of the code we use to take your code repo and turn it into an artifact that can be run inside of AWS Lambda with the Cyclic lambda runtime."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Install your code's dependencies ",(0,l.kt)("inlineCode",{parentName:"li"},"npm install")),(0,l.kt)("li",{parentName:"ul"},"Zip of your code and installed dependencies (for example ",(0,l.kt)("inlineCode",{parentName:"li"},"node_modules"),") recursively"),(0,l.kt)("li",{parentName:"ul"},"Stage the zip into AWS in preparation of the ",(0,l.kt)("strong",{parentName:"li"},"deploy")," step")),(0,l.kt)("h2",{id:"lifecycle-scripts"},"Lifecycle scripts"),(0,l.kt)("p",null,"NPM executes several ",(0,l.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/v7/using-npm/scripts#npm-ci"},"lifecycle scripts")," as part of the ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install"),". According to the documentation these are run in the following order:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"preinstall")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"install")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"postinstall")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prepublish")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"preprepare")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prepare")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"postprepare"))),(0,l.kt)("p",null,"If you have particular needs try putting it into the appropriate lifecycle script. If you have needs beyond what these lifecycle scripts can provide or they don't solve for your use case send us an email: ",(0,l.kt)("i",{className:"far fa-envelope"})," ",(0,l.kt)("a",{parentName:"p",href:"mailto:hello@cyclic.sh"},"hello@cyclic.sh")," or join us on ",(0,l.kt)("a",{parentName:"p",href:"https://discord.gg/huhcqxXCbE"},(0,l.kt)("i",{className:"fab fa-discord"}),"  Discord")))}u.isMDXComponent=!0},8061:function(e,t,i){t.Z=i.p+"assets/images/build-process.drawio-9779c9c0b971713df2e0e5bfb58789c9.png"}}]);